(this.webpackJsonpdeadcode=this.webpackJsonpdeadcode||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(9);var r={getNew:function(e,t){return{type:e,language:t,on:arguments.length>2&&void 0!==arguments[2]&&arguments[2],properties:arguments.length>3?arguments[3]:void 0}},clone:function(e){return Object(n.a)({},e,{propertes:Object(n.a)({},e.properties)})},Types:{CODE_TOGGLE:"CODE_TOGGLE",SLIDER:"SLIDER"},PropertySpec:{SLIDER:{code:"string",value:"float",operator:"string",min:"float",max:"float",step:"float",scale:"string"},CODE_TOGGLE:{code:"string"},CODE_SLIDER:{code:"string",indices:"array",value:"float",min:"float",max:"float",step:"float",scale:"string"}},util:{defaultEffects:{TidalCycles:function(){return[r.getNew(r.Types.SLIDER,"TidalCycles",!0,{code:"gain",value:1,operator:"|*",min:0,max:2,step:.01,scale:"linear"}),r.getNew(r.Types.SLIDER,"TidalCycles",!1,{code:"lpf",value:22e3,operator:"#",min:0,max:22e3,step:10,scale:"log"}),r.getNew(r.Types.SLIDER,"TidalCycles",!1,{code:"hpf",value:0,operator:"#",min:0,max:22e3,step:10,scale:"log"}),r.getNew(r.Types.SLIDER,"TidalCycles",!1,{code:"coarse",value:0,operator:"#",min:0,max:24,step:1,scale:"linear"}),r.getNew(r.Types.SLIDER,"TidalCycles",!1,{code:"room",value:0,operator:"#",min:0,max:1,step:.01,scale:"linear"}),r.getNew(r.Types.SLIDER,"TidalCycles",!1,{code:"size",value:0,operator:"#",min:0,max:1,step:.01,scale:"linear"}),r.getNew(r.Types.CODE_TOGGLE,"TidalCycles",!1,{code:""})]},Hydra:function(){return[r.getNew(r.Types.SLIDER,"Hydra",!1,{code:"kaleid",value:1,min:0,max:50,step:1,scale:"linear"}),r.getNew(r.Types.SLIDER,"Hydra",!1,{code:"pixelate",value:1,min:0,max:200,step:1,scale:"linear"})]}}}};t.a=r},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var n=a(180),r={MIDI_UPDATE:{name:"MIDI_UPDATE",propogateToServer:!0},PUSH_STATE:{name:"PUSH_STATE",propogateToServer:!0},RECEIVE_STATE:{name:"RECEIVE_STATE",propogateToServer:!1},CONNECT:{name:"CONNECT",propogateToServer:!1},SAVE:{name:"SAVE",propogateToServer:!1},LOAD:{name:"LOAD",propogateToServer:!1},LOAD_FROM_SERVER:{name:"LOAD_FROM_SERVER",propogateToServer:!1},DOWNLOAD:{name:"DOWNLOAD",propogateToServer:!1},MASTER_UPDATE:{name:"MASTER_UPDATE",propogateToServer:!0},MASTER_ADD_EFFECT:{name:"MASTER_ADD_EFFECT",propogateToServer:!0},STEM_UPDATE:{name:"STEM_UPDATE",propogateToServer:!0},STEM_DELETE_EFFECT:{name:"STEM_DELETE_EFFECT",propogateToServer:!0},STEM_ADD_EFFECT:{name:"STEM_ADD_EFFECT",propogateToServer:!0},STEM_COPY:{name:"STEM_COPY",propogateToServer:!0},STEM_PASTE:{name:"STEM_PASTE",propogateToServer:!0},TRACK_UPDATE:{name:"TRACK_UPDATE",propogateToServer:!0},TRACK_DELETE_STEM:{name:"TRACK_DELETE_STEM",propogateToServer:!0},TRACK_ADD_STEM:{name:"TRACK_ADD_STEM",propogateToServer:!0},TRACK_DELETE_EFFECT:{name:"TRACK_DELETE_EFFECT",propogateToServer:!0},TRACK_ADD_EFFECT:{name:"TRACK_ADD_EFFECT",propogateToServer:!0},TRACK_ADD:{name:"TRACK_ADD",propogateToServer:!0},TRACK_DELETE:{name:"TRACK_DELETE",propogateToServer:!0},EFFECT_UPDATE:{name:"EFFECT_UPDATE",propogateToServer:!0},SETTINGS_UPDATE_STYLE:{name:"SETTINGS_UPDATE_STYLE",propogateToServer:!1}};var o={},s={},i=function(e){var t={propogateToServer:r[e].propogateToServer,fromServer:!1};s[function(e){var t=e.split("_");return(t=t.map((function(e){return e[0]+e.slice(1,e.length).toLowerCase()})))[0]=t[0].toLowerCase(),t.join("")}(e)]=Object(n.a)(e,(function(e){return e}),(function(){return t})),o[e]=e};for(var c in r)i(c)},,,,,,,function(e,t,a){"use strict";var n=a(9),r=a(13),o=a(25),s=a(60),i=a(24),c=a(12),l=a(50),u=a(65);function p(e,t){var a=Object.keys(e.tracks).findIndex((function(a){return e.tracks[a].stems.includes(t)}));return{track:a,stem:e.tracks[Object.keys(e.tracks)[a]].stems.findIndex((function(e){return e===t}))}}t.a=function e(t){return{pushState:function(){var e=Object(n.a)({},o.a.getState(),{connection:void 0});t(r.b.pushState(e))},receiveState:function(e){t(r.b.receiveState(e))},connect:function(e,a){var n=r.b,o=function(){t(n.connect({url:e,port:a,isConnected:!1}))},i=o;s.a.init(e,a,(function(){t(r.b.connect({url:e,port:a,isConnected:!0}))}),o,i)},stemCopy:function(){var e=o.a.getState(),a=Object.keys(e.stems).filter((function(t){return e.stems[t].selected}));t(r.b.stemCopy({items:a}))},stemPaste:function(a){var n=o.a.getState();if(!n.copy||n.copy.items.length<1)console.log("nothing copied");else{var r=p(n,a),s=e(t),i=p(n,n.copy.items[0]),c=r.track-i.track,l=r.stem-i.stem;n.copy.items.forEach((function(e){var t=p(n,e),a=t.track+c,r=t.stem+l;if(a>=Object.keys(n.tracks).length)console.log("too long");else{for(var i=Object.keys(n.tracks)[a];r>=n.tracks[i].stems.length;)s.trackAddStem(i),n=o.a.getState();var u=n.tracks[i].stems[r];s.stemUpdate(u,n.stems[e])}}))}},save:function(){window.localStorage.setItem("state",JSON.stringify(o.a.getState())),console.log("saved")},load:function(){var e=window.localStorage.getItem("state");e?(e=JSON.parse(e),i.a.init(e),t(r.b.load(e))):console.warn("Tried to load state but empty")},loadFromServer:function(){s.a.sendAction({type:r.a.LOAD_FROM_SERVER.name,meta:{propogateToServer:!0,fromServer:!1}})},open:function(e){if(e)e.text().then((function(e){t(r.b.load(JSON.parse(e)))}));else{var a=document.createElement("input");a.type="file",a.onchange=function(e){a.files[0].text().then((function(e){var a=JSON.parse(e);i.a.init(a),t(r.b.load(a))}))},a.click()}},download:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o.a.getState())),a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("download","dead_state.json"),a.click(),t(r.b.download())},masterUpdate:function(e,a){t(r.b.masterUpdate({language:e,value:a}))},masterAddEffect:function(e,a,n,o){var s=i.a.new(),l=c.a.getNew(e,a,n,o);t(r.b.masterAddEffect({language:a,effectId:s,value:l}))},stemUpdate:function(e,a){t(r.b.stemUpdate({stemId:e,value:a}))},stemUpdateLanguage:function(a,n){var r=o.a.getState().stems[a],s=e(t);r.language!==n&&(r.effects.forEach((function(e){s.stemDeleteEffect(a,e)})),c.a.util.defaultEffects[n]().forEach((function(e){s.stemAddEffect(a,e.type,e.language,e.on,e.properties)})),s.stemUpdate(a,{language:n}))},stemDeleteEffect:function(e,a){t(r.b.stemDeleteEffect({stemId:e,effectId:a}))},stemAddEffect:function(e,a,n,o,s){var l=i.a.new(),u=c.a.getNew(a,n,o,s);t(r.b.stemAddEffect({stemId:e,effectId:l,value:u}))},trackUpdate:function(e,a){t(r.b.trackUpdate({trackId:e,value:a}))},trackDeleteStem:function(e,a){if(void 0===e){var n=o.a.getState();e=Object.keys(n.tracks).find((function(e){return n.tracks[e].stems.includes(a)}))}t(r.b.trackDeleteStem({trackId:e,stemId:a}))},trackAddStem:function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TidalCycles",o=i.a.new(),s=l.a.getNew(n);t(r.b.trackAddStem({trackId:a,stemId:o,value:s})),c.a.util.defaultEffects[n]().forEach((function(a){e(t).stemAddEffect(o,a.type,a.language,a.on,a.properties)}))},trackDeleteEffect:function(e,a){t(r.b.trackDeleteEffect({trackId:e,effectId:a}))},trackAddEffect:function(e){var a=i.a.new(),n=c.a.getNew(c.a.Types.SLIDER,"TidalCycles",!0,{code:"gain",value:1,operator:"|*",min:0,max:2,step:.01,scale:"linear"});t(r.b.trackAddEffect({trackId:e,effectId:a,value:n}))},trackAdd:function(a){var n=u.a.getNew(a),o=i.a.new();t(r.b.trackAdd({trackId:o,value:n}));var s=e(t);[0,0,0,0,0].forEach((function(){s.trackAddStem(o)})),s.trackAddEffect(o)},trackDelete:function(a){var n=o.a.getState().tracks[a],s=e(t);n.stems.forEach((function(e){s.trackDeleteStem(a,e)})),t(r.b.trackDelete({trackId:a}))},effectUpdate:function(e,a){t(r.b.effectUpdate({effectId:e,value:a}))},settingsUpdateStyle:function(e){var a=document.body.querySelector("#style style");null===a&&((a=document.createElement("style")).setAttribute("id","style"),document.body.append(a)),a.innerHTML=":root{".concat(Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])})).join(";\n  "),"}"),t(r.b.settingsUpdateStyle({value:e}))}}}},,,,function(e,t,a){"use strict";var n=a(58),r={index:0,init:function(e){var t=Math.max.apply(Math,Object(n.a)(Object.keys(e.effects).map(parseFloat))),a=Math.max.apply(Math,Object(n.a)(Object.keys(e.tracks).map(parseFloat))),o=Math.max.apply(Math,Object(n.a)(Object.keys(e.stems).map(parseFloat)));r.index=Math.max(t,a,o)+1,console.log("loaded id index: "+r.index)},new:function(){return r.index+++""}};t.a=r},function(e,t,a){"use strict";var n=a(48),r=a(9),o=a(26),s=function(e,t){var a=t.payload;if("TRACK_UPDATE"===t.type)return e[a.trackId]=Object.assign({},e[a.trackId],a.value),Object(r.a)({},e);if("TRACK_DELETE_STEM"===t.type)return e[a.trackId].stems=e[a.trackId].stems.filter((function(e){return e!==a.stemId})),e[a.trackId]=Object.assign({},e[a.trackId]),Object(r.a)({},e);if("TRACK_ADD_STEM"===t.type){var n=Object.assign({},e[a.trackId]);n.stems=n.stems.concat([a.stemId]);var o={};return o[a.trackId]=n,Object.assign({},e,o)}return"TRACK_DELETE_EFFECT"===t.type?(e[a.trackId]=Object(r.a)({},e[a.trackId]),e[a.trackId].effects=e[a.track].filter((function(e){return e!==a.effectId})),Object(r.a)({},e)):"TRACK_ADD_EFFECT"===t.type?(e[a.trackId]=Object(r.a)({},e[a.trackId]),e[a.trackId].effects.push(a.effectId),Object(r.a)({},e)):"TRACK_ADD"===t.type?(e[a.trackId]=a.value,Object(r.a)({},e)):e},i=function(e,t){switch(t.type){case"CONNECT":return{url:t.payload.url,port:t.payload.port,isConnected:t.payload.isConnected};default:return e}},c=function(e,t){var a;switch(t.type){case"MASTER_UPDATE":return a=Object.assign({},e[t.payload.language],t.payload.value),e[t.payload.language]=a,Object(r.a)({},e);case"MASTER_ADD_EFFECT":return(a=Object.assign({},e[t.payload.language])).effects=a.effects.concat([t.payload.effectId]),e[t.payload.language]=a,Object(r.a)({},e);default:return e}},l=function(e,t){var a=t.payload;return"STEM_UPDATE"===t.type?(e[a.stemId]=Object.assign({},e[a.stemId],a.value),Object(r.a)({},e)):"STEM_DELETE_EFFECT"===t.type?(e[a.stemId]=Object.assign({},e[a.stemId]),e[a.stemId].effects=e[a.stemId].effects.filter((function(e){return e!==a.effectId})),Object(r.a)({},e)):"STEM_ADD_EFFECT"===t.type?(e[a.stemId]=Object.assign({},e[a.stemId]),e[a.stemId].effects.push(a.effectId),Object(r.a)({},e)):"STEM_COPY"===t.type?e:"STEM_PASTE"===t.type?(console.log("paste not yet implemented"),e):"TRACK_ADD_STEM"===t.type?(e[a.stemId]=a.value,Object(r.a)({},e)):"TRACK_DELETE_STEM"===t.type?(delete e[a.stemId],Object(r.a)({},e)):e},u=function(e,t){return"EFFECT_UPDATE"===t.type?(e[t.payload.effectId]=Object.assign({},e[t.payload.effectId],t.payload.value),Object(r.a)({},e)):"STEM_ADD_EFFECT"===t.type?(e[t.payload.effectId]=t.payload.value,Object(r.a)({},e)):"STEM_DELETE_EFFECT"===t.type?(delete e[t.payload.effectId],Object(r.a)({},e)):"TRACK_ADD_EFFECT"===t.type?(e[t.payload.effectId]=t.payload.value,Object(r.a)({},e)):"TRACK_DELETE_EFFECT"===t.type?(delete e[t.payload.effectId],Object(r.a)({},e)):"MASTER_ADD_EFFECT"===t.type?(e[t.payload.effectId]=t.payload.value,Object(r.a)({},e)):e},p=a(13),d=function(e,t){switch(t.type){case"MIDI_UPDATE":return Object.assign({},e,t.payload);default:return e}},f=function(e,t){switch(t.type){case"SETTINGS_UPDATE_STYLE":var a=Object.assign({},e.style,t.payload);return Object.assign({},e,{style:a});default:return e}},h=function(e,t){return"STEM_COPY"===t.type?{type:"stems",items:t.payload.items}:e};console.log(o.a.defaultState);var m=a(60),_=a(66),g=a.n(_),v=Object(n.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.a.defaultState,t=arguments.length>1?arguments[1]:void 0;return"LOAD"===t.type?t.payload:t.type===p.a.RECEIVE_STATE.name?Object(r.a)({},t.payload,{connection:e.connection}):{copy:h(e.copy,t),master:c(e.master,t),connection:i(e.connection,t),tracks:s(e.tracks,t),stems:l(e.stems,t),effects:u(e.effects,t),midi:d(e.midi,t),settings:f(e.settings,t)}}),Object(n.applyMiddleware)((function(e){return function(e){return function(t){var a=t.meta;if(!a.fromServer&&a.propogateToServer){var n=Object(r.a)({},t);n.type===p.a.PUSH_STATE.name&&(n.type=p.a.RECEIVE_STATE.name),m.a.sendAction(n)}return e(t)}}}),g.a));t.a=v},function(e,t,a){"use strict";var n=a(65);var r={getNew:function(e,t){return{macros:"",effects:[],properties:t}}},o=a(24),s=a(12),i=a(50),c={style:{"--bg-image":"radial-gradient(rgb(170,170,170), rgb(170,170,170))","--launchspace-bg-color":"transparent","--border-radius":" 0px","--stem-on":"#00FFFE","--stem-off":"rgba(230,230,230)","--stem-editor-color":"rgba(200, 200, 200, 0.5)","--font-family":"'Helventica', sans-serif","--font-color-dark":"black","--font-color-light":"rgb(30, 30, 30)","--scrollbar-width":"0px","--track-border-color":"lightgrey","--select-color":"rgb(250,10,10)","--settings-background-color":"rgb(50,50,50)","--settings-font-color":"rgb(150,150,150)","--midi-background-color":"rgba(100,100,100,0.600)"}},l={top:0,left:0,rows:0,columns:0},u={Languages:{TidalCycles:"TidalCycles",Hydra:"Hydra"}},p={},d={},f={},h=r.getNew("TidalCycles",{tempo:120});for(var m in s.a.util.defaultEffects.TidalCycles()){var _=o.a.new();f[_]=s.a.util.defaultEffects.TidalCycles()[m],h.effects.push(_)}var g=r.getNew("Hydra",{mixMethod:"blend"});for(var v in s.a.util.defaultEffects.Hydra()){var b=o.a.new();f[b]=s.a.util.defaultEffects.Hydra()[v],g.effects.push(b)}for(var E={TidalCycles:h,Hydra:g},y=0;y<8;y++){var O=o.a.new();p[O]=n.a.getNew();for(var C=function(e){var t=o.a.new();d[t]=i.a.getNew(),s.a.util.defaultEffects.TidalCycles().forEach((function(e){var a=o.a.new();f[a]=e,d[t].effects.push(a)})),p[O].stems.push(t)},k=0;k<8;k++)C();var T=o.a.new();f[T]=s.a.getNew(s.a.Types.SLIDER,"TidalCycles",!0,{code:"gain",value:1,operator:"|*",min:0,max:2,step:.01,scale:"linear"}),p[O].effects.push(T)}u.defaultState={connection:{isConnected:!1,url:"",port:8001},master:E,copy:null,tracks:p,stems:d,effects:f,midi:l,settings:c};t.a=u},,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(4),r=a(5),o=a(7),s=a(6),i=a(8),c=a(0),l=a.n(c),u=(a(125),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"onClick",value:function(){this.props.onChange?this.props.onChange(!this.props.on):console.warn("no onChange for toggle")}},{key:"render",value:function(){return l.a.createElement("div",{onContextMenu:this.onClick.bind(this),onClick:this.onClick.bind(this),className:"Toggle"+(this.props.on?" on":"")},l.a.createElement("div",null))}}]),t}(c.Component))},,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(58),r=a(9),o=a(12);var s={getNew:function(){return{name:"",on:!1,selected:!1,open:!1,live:!1,language:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TidalCycles",code:"",effects:[]}},clone:function(e){return Object(r.a)({},e,{effects:Object(n.a)(e.effects).map(o.a.clone)})}};t.a=s},function(e,t,a){"use strict";var n=a(9),r=a(73),o=a(17),s=a(20);t.a=Object(o.b)((function(e,t){return Object(n.a)({},e.effects[t.id],{},t)}),(function(e){return{globalActions:Object(s.a)(e)}}))(r.a)},,function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(4),r=a(5),o=a(7),s=a(6),i=a(8),c=a(0),l=a.n(c),u=(a(140),a(33)),p=a.n(u),d=a(35),f=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={code:a.props.code},a.updateCode=p()(a.props.onChange,1e3),a.flashTimeout=null,a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){e.code!==this.props.code&&this.props.code!==this.state.code&&this.setState({code:this.props.code})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"CodeEditor"},l.a.createElement("div",{className:"Liveness"},l.a.createElement("div",null,l.a.createElement("div",{className:"verticalCenter"},"Live")),l.a.createElement(d.a,{onChange:function(t){e.props.onChangeLive(t)},on:this.props.live}),l.a.createElement("button",{disabled:this.props.live,onClick:function(t){e.props.onChange(e.state.code)}},"eval")),l.a.createElement("textarea",{className:this.state.flash?"flash":"",onKeyPress:this.onKeyPress.bind(this),onChange:function(t){e.setState({code:t.target.value}),e.props.live&&e.updateCode.bind(e)(t.target.value)},value:this.state.code}))}},{key:"onKeyPress",value:function(e){var t=this;e.shiftKey&&"Enter"===e.key&&(e.preventDefault(),this.props.onChange(this.state.code),clearTimeout(this.flashTimeout),this.setState({flash:!0}),this.flashTimeout=setTimeout((function(){t.setState({flash:!1})}),1))}}]),t}(c.Component)},,,,function(e,t,a){"use strict";var n=a(4),r=a(5),o=a(7),s=a(6),i=a(8),c=a(0),l=a.n(c),u=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).ref=l.a.createRef(),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(this.props.text!==e.text){this.ref.current.innerText="",this.interval&&clearInterval(this.interval);var r=0;this.interval=setInterval((function(){r<n.props.text.length?n.ref.current.innerText=n.props.text.substring(0,r):r===n.props.text.length?(n.ref.current.innerText=n.props.text.substring(0,r),n.props.triggerResize()):clearInterval(n.interval),r+=1}),this.props.rate)}}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval),this.ref.current.innerText="",this.props.triggerResize()}},{key:"componentDidMount",value:function(){this.componentDidUpdate({text:null})}},{key:"render",value:function(){return l.a.createElement("span",Object.assign({ref:this.ref},this.props))}}]),t}(c.Component);t.a=u},,,function(e,t,a){"use strict";var n=a(25),r={init:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.hostname,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8e3,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};r.ws&&r.ws.close(),e="undefined"!==typeof window?window.WebSocket||window.MozWebSocket:a(121);try{r.ws=new e("ws://"+t+":"+n),r.ws.isOpen=!1,r.ws.onopen=function(){r.ws.isOpen=!0,console.log("ws connection established"),o()},r.ws.onmessage=r.onMessage,r.ws.onerror=function(e){console.warn(e),i(e)},r.ws.onclose=function(e){r.ws.isOpen=!1,s(e)}}catch(c){i()}},onMessage:function(e){var t=JSON.parse(e.data);if("action"===t.type){var a=t.action;a.meta=a.meta||{},a.meta.fromServer=!0,n.a.dispatch(a)}else console.warn("Unrecognized message type from WS server: "+t.type,t)},sendAction:function(e){if(r.ws&&r.ws.isOpen){var t={type:"action",action:e};r.ws.send(JSON.stringify(t))}else console.warn("Connection is closed")},sendCode:function(e){r.ws&&r.ws.isOpen?r.ws.send(JSON.stringify({type:"eval",code:e})):console.warn("Connection is closed")}};t.a=r},function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s}));a(0);var n=a(12),r=a(26),o={language:"Index",getCode:function(e){e.master.Hydra.properties.mixMethod;var t,a=Object.keys(e.tracks).map((function(t){return function(e,t){var a,n=t.stems.map((function(t){return e.stems[t]})).filter((function(e){return e.on&&""!==e.code&&e.language===r.a.Languages.Hydra})).map((function(t){return function(e,t){var a=t.effects.map((function(t){return e.effects[t]})).filter((function(e){return e.on})).map(s);return t.code+a.join("")}(e,t)}));if(n.join(e.master.Hydra.properties.mixMethod+"("+1/n.length),!(n.length>0))return null;a=n[0];for(var o=1;o<n.length;o++)a+=".".concat(e.master.Hydra.properties.mixMethod,"(").concat(n[o],",").concat(1/n.length,")");var i=t.effects.map((function(t){return e.effects[t]})).filter((function(e){return e.on})).map(s);return a+i.join("")}(e,e.tracks[t])})).filter((function(e){return e}));a.length>0&&(t=a[0]);for(var n=1;n<a.length;n++)t+=".".concat(e.master.Hydra.properties.mixMethod,"(").concat(a[n],",").concat(1/a.length,")");var o=e.master.Hydra.effects.map((function(t){return e.effects[t]})).filter((function(e){return e.on})).map(s);t||(t="solid(0,0,0,0)");return t+o.join("")+".out()"},getMacros:function(e){return e.master.Hydra.macros}};function s(e){switch(e.type){case n.a.Types.CODE_TOGGLE:return e.properties.code;case n.a.Types.SLIDER:return"gain"===e.properties.code?".blend(solid(0,0,0,0),".concat(1-e.properties.value/2,")"):".".concat(e.properties.code,"(").concat(e.properties.value,")");default:console.warn("Index renderer not implemented for type "+e.type)}}({})[n.a.Types.SLIDER]=function(e){return".".concat(e.name,"(").concat(e.properties.value,")")}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(61),r=a(71),o={Hydra:n.a,TidalCycles:r.b}},,,function(e,t,a){"use strict";var n=a(9),r=a(12),o=a(50);var s={getNew:function(){return{name:"New Track",stems:[],effects:[]}},clone:function(e){return Object(n.a)({},e,{stems:e.stems.map((function(e){return o.a.clone(e)})),effects:e.effects.map(r.a.clone)})}};t.a=s},,,,,function(e,t,a){"use strict";var n=a(4),r=a(5),o=a(7),s=a(6),i=a(8),c=a(0),l=a.n(c),u=a(12);a(141);var p=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).ref=l.a.createRef(),a.state={creating:!1,progress:"plus",type:null},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"transitionToSpec",value:function(){var e=this.ref.current.querySelector("#effect_creator_type_input");if(e){var t=e.value;this.setState({type:t,progress:"spec"})}else console.warn("this shouldnt happen")}},{key:"render",value:function(){var e=this,t=[];if("plus"===this.state.progress)t.push(l.a.createElement("button",{key:"plus",onClick:function(){e.setState({progress:"type"})}}," + "));else if("type"===this.state.progress){var a=[];Object.keys(u.a.Types).forEach((function(e){e=u.a.Types[e],a.push(l.a.createElement("option",{key:e,value:e},e.toLowerCase()))}));var n=l.a.createElement("select",{key:"effect_creator_type_input",id:"effect_creator_type_input"},a),r=l.a.createElement("button",{key:"effect_creator_next",onClick:this.transitionToSpec.bind(this)}," next "),o=l.a.createElement("button",{key:"effect_creator_cancel",onClick:function(){e.setState({progress:"plus"})}}," cancel ");t.push([n,r,o])}else if("spec"===this.state.progress){var s=[];Object.keys(u.a.PropertySpec[this.state.type]).forEach((function(t){var a=function(e,t){return{array:l.a.createElement("input",{placeholder:"array",id:e,className:"specInput",type:"text"}),string:l.a.createElement("input",{placeholder:"string",id:e,className:"specInput",type:"text"}),float:l.a.createElement("input",{placeholder:"float",id:e,className:"specInput",type:"number"}),integer:l.a.createElement("input",{placeholder:"integer",id:e,className:"specInput",type:"number"}),boolean:l.a.createElement("input",{placeholder:"boolean",id:e,className:"specInput",type:"checkbox"})}[t]}(t,u.a.PropertySpec[e.state.type][t]);s.push(l.a.createElement("div",{key:t},l.a.createElement("div",null,t),a))})),t.push(s),t.push(l.a.createElement("button",{key:"create",onClick:this.onClick.bind(this)},"create")),t.push(l.a.createElement("button",{key:"effect_creator_cancel",onClick:function(){e.setState({progress:"plus"})}}," cancel "))}else console.warn("something bad has happened"),t.push(l.a.createElement("button",{onClick:function(){e.setState({progress:"type"})}}," + "));return l.a.createElement("div",{ref:this.ref,className:"EffectCreator"},l.a.createElement("div",null,l.a.createElement("div",null,"New Effect")),t)}},{key:"onClick",value:function(){var e=this,t={};Object.keys(u.a.PropertySpec[this.state.type]).forEach((function(a){var n=function(e,t){switch(t){case"array":return JSON.parse(e);case"string":return e;case"float":return parseFloat(e);case"integer":return parseInt(e);case"boolean":return"true"===e;default:return console.warn("Type not defined: "+t),e}}(e.ref.current.querySelector("#"+a).value,u.a.PropertySpec[e.state.type][a]);t[a]=n})),this.props.onCreate?this.props.onCreate(this.state.type,t):console.warn("onCreate not defineed for effect creator"),this.setState({progress:"plus"})}}]),t}(c.Component);t.a=p},function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return c}));a(0);var n=a(26),r=a(12);var o={};function s(e){return o[e.type](e)}function i(e,t){var a=[];if(t.stems.forEach((function(t){var n=e.stems[t];n.on&&""!==n.code&&"TidalCycles"===n.language&&a.push(function(e,t){if(""===t.code)return null;var a=[];t.effects.forEach((function(t){var n=e.effects[t];n.on&&a.push(s(n))}));var n=a.join(" $ ");return n+=a.length?" $ ":"",n+=t.code}(e,n))})),a.length<1)return"";a=a.join(", ");var n=[];t.effects.forEach((function(t){var a=e.effects[t];a.on&&n.push(s(a))}));var r=n.join(" $ ");return"".concat(r," $ stack [").concat(a,"]")}o[r.a.Types.SLIDER]=function(e){return"(".concat(e.properties.operator," ").concat(e.properties.code," ").concat(e.properties.value,")")},o[r.a.Types.CODE_TOGGLE]=function(e){return"(".concat(e.properties.code,")")};var c={language:"TidalCycles",getCode:function(e){var t="stack [";t+=Object.keys(e.tracks).map((function(t){return i(e,e.tracks[t])})).filter((function(e){return""!==e})).join(", ")+"]";var a=[];e.master[n.a.Languages.TidalCycles].effects.forEach((function(t){var n=e.effects[t];n.on&&a.push(s(n))}));var r=a.join(" $ ");return"d1 $ ".concat(r).concat(a.length?" $ ":"").concat(t)},trackToCode:i,getTempoCode:function(e){return"setcps "+e.master.TidalCycles.properties.tempo/60/2}}},,function(e,t,a){"use strict";var n=a(4),r=a(5),o=a(7),s=a(6),i=a(8),c=a(0),l=a.n(c),u=(a(123),a(12)),p=(a(124),a(208)),d=a(214),f=a(212),h=a(35),m=function(e){function t(e){var a;Object(n.a)(this,t);var r=(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).toSliderScale(a.props.properties.value);return a.state={value:a.props.properties.value,sliderValue:r},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){if(this.props.properties.value!==e.properties.value){var n=this.toSliderScale(this.props.properties.value);this.setState({value:this.props.properties.value,sliderValue:n})}}},{key:"toSliderScale",value:function(e){if("log"===this.props.properties.scale){var t=this.props.properties.max-this.props.properties.min;return Math.pow(e/t,.5)*t}return e}},{key:"fromSliderScale",value:function(e){if("log"===this.props.properties.scale){var t=this.props.properties.max-this.props.properties.min;return Math.round(Math.pow(e/t,2)*t*this.props.properties.step)/this.props.properties.step}return e}},{key:"render",value:function(){return this.props.isVertical?this.renderVertical():this.renderHorizontal()}},{key:"handleSliderChange",value:function(e,t){if(t){var a=this.props.properties;a.value=t,this.props.globalActions.effectUpdate(this.props.id,{properties:a})}}},{key:"handleInputChange",value:function(e){var t=parseFloat(e.target.value),a=this.props.properties;a.value=t,this.props.globalActions.effectUpdate(this.props.id,{properties:a})}},{key:"toggle",value:function(e){this.props.globalActions.effectUpdate(this.props.id,{on:e})}},{key:"renderHorizontal",value:function(){var e=this;return l.a.createElement("div",{className:"Slider horizontal"},this.props.noToggle?null:l.a.createElement(h.a,{onChange:this.toggle.bind(this),on:this.props.on}),l.a.createElement("div",{className:"text"},l.a.createElement("div",null,this.props.properties.code)),l.a.createElement(p.a,{container:!0,spacing:2,alignItems:"center"},l.a.createElement(p.a,{item:!0,xs:!0},l.a.createElement(d.a,{onChange:function(t,a){a&&(e.setState({sliderValue:a,value:e.fromSliderScale(a)}),e.handleSliderChange(t,a))},min:this.props.properties.min,max:this.props.properties.max,step:this.props.properties.step,value:parseFloat(this.state.sliderValue)})),l.a.createElement(p.a,{item:!0},l.a.createElement("input",{margin:"dense",onInput:function(t){var a=parseFloat(t.target.value);t.persist(),e.setState({value:a,sliderValue:e.toSliderScale(a)}),e.handleInputChange.bind(e)(t)},value:this.state.value,step:this.props.properties.step,min:this.props.properties.min,max:this.props.properties.max,type:"number"}))))}},{key:"renderVertical",value:function(){var e=this;return l.a.createElement("div",{className:"Slider vertical"},l.a.createElement(d.a,{orientation:"vertical",onChange:function(t,a){a&&(e.setState({sliderValue:a,value:e.fromSliderScale(a)}),e.handleSliderChange(t,a))},min:this.props.properties.min,max:this.props.properties.max,step:this.props.properties.step,value:parseFloat(this.state.sliderValue)}),l.a.createElement(f.a,{margin:"dense",onChange:function(t){var a=parseFloat(t.target.value);t.persist(),e.setState({value:a,sliderValue:e.toSliderScale(a)}),e.handleInputChange.bind(e)(t)},value:this.state.value,inputProps:{step:this.props.properties.step,min:this.props.properties.min,max:this.props.properties.max,type:"number","aria-labelledby":"input-slider"}}),l.a.createElement("div",{style:{textAlign:"center"}},this.props.properties.code,this.props.noToggle?null:l.a.createElement(h.a,{onChange:this.toggle.bind(this),on:this.props.on})))}}]),t}(c.Component),_=a(9),g=(a(126),a(52)),v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={code:a.props.properties.code},a.effectUpdate=Object(g.debounce)((function(e){a.props.globalActions.effectUpdate(a.props.id,{properties:{code:e}})}),500),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"onChange",value:function(e){var t=e.target.value;this.setState({code:t}),this.effectUpdate(t)}},{key:"onToggle",value:function(e){this.props.globalActions.effectUpdate(this.props.id,{on:e})}},{key:"componentDidUpdate",value:function(e,t,a){e.properties.code!==this.props.properties.code&&this.props.properties.code!==this.state.code&&this.setState(Object(_.a)({},this.state,{code:this.props.properties.code}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"CodeToggle"},l.a.createElement("div",null,l.a.createElement(h.a,{on:this.props.on,onChange:this.onToggle.bind(this)}),l.a.createElement("div",{className:"text"},l.a.createElement("div",null,"Code Toggle"))),l.a.createElement("div",null,l.a.createElement("input",{type:"text",onChange:this.onChange.bind(this),value:this.state.code})))}}]),t}(c.Component),b=(a(128),a(33)),E=a.n(b),y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={width:0},a.spanRef=l.a.createRef(),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"onChange",value:function(e){this.spanRef.current.innerText=e.target.value;var t=this.spanRef.current.scrollWidth;this.setState({width:t}),this.props.onChange(e)}},{key:"render",value:function(){var e=this.props.style||{};return e.width=this.state.width+"px",l.a.createElement("div",null,l.a.createElement("input",Object.assign({},this.props,{style:e,onChange:this.onChange.bind(this)})),l.a.createElement("span",{ref:this.spanRef,style:{color:"transparent",backgroundColor:"transparent",pointerEvents:"none",position:"absolute"}},this.props.value))}}]),t}(c.Component),O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={text:a.props.text,indices:a.props.indices},a.onChange=E()(a._onChange,500),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"_onChange",value:function(){}},{key:"textChange",value:function(e){}},{key:"render",value:function(){var e=this,t=0,a=[l.a.createElement(y,{onChange:this.textChange.bind(this),key:t+"text",className:"text"})];t++;var n=this.state.text;return this.state.indices.forEach((function(r){var o=n.slice(0,r),s=n.slice(r);n=s,a.push(l.a.createElement(y,{onChange:e.textChange.bind(e),key:t+"text",className:"text",value:o})),a.push(l.a.createElement(y,{key:t+"placeholder",className:"placeholder",value:e.props.value})),t++})),a.push(l.a.createElement(y,{onChange:this.textChange.bind(this),key:t+"text",className:"text",value:n})),l.a.createElement("div",{className:"TemplateInput"},l.a.createElement("div",{className:"text"},a),l.a.createElement("button",null,"insert"))}}]),t}(c.Component);c.Component;a.d(t,"a",(function(){return C}));var C=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e;return this.props.type===u.a.Types.SLIDER?e=l.a.createElement(m,this.props):this.props.type===u.a.Types.CODE_TOGGLE&&(e=l.a.createElement(v,this.props)),l.a.createElement("div",{className:"Effect",id:this.props.id},e)}}]),t}(c.Component)},,function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(4),r=a(5),o=a(7),s=a(6),i=a(8),c=a(0),l=a.n(c),u=(a(142),a(179)),p=a(51),d=a(33),f=a.n(d),h=a(53),m=a(26),_=a(70),g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={code:a.props.code},a.updateCode=f()(a._updateCode,1e3),a.textAreaRef=l.a.createRef(),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"effectIdToComponent",value:function(e){return l.a.createElement(p.a,{key:e,id:e})}},{key:"render",value:function(){var e=this,t=this.props.effects.map(this.effectIdToComponent.bind(this));return l.a.createElement("div",{className:"StemEditor",style:this.props.style},"Name:",l.a.createElement("input",{style:{backgroundColor:"var(--stem-off)"},onChange:this.updateName.bind(this),type:"text",value:this.props.name}),l.a.createElement("select",{value:this.props.language,onChange:this.handleLanguageChange.bind(this),name:"language"},Object.keys(m.a.Languages).map((function(e){return l.a.createElement("option",{key:e,value:e},e)}))),l.a.createElement(h.a,{onChange:function(t){return e.props.globalActions.stemUpdate(e.props.id,{code:t})},onChangeLive:function(t){return e.props.globalActions.stemUpdate(e.props.id,{live:t})},code:this.props.code,live:this.props.live}),l.a.createElement("div",null,t,l.a.createElement(_.a,{onCreate:this.createEffect.bind(this)})),l.a.createElement(u.a,{style:{marginTop:"5px"},onClick:this.delete.bind(this),color:"primary",variant:"outlined"},"delete"))}},{key:"createEffect",value:function(e,t){this.props.globalActions.stemAddEffect(this.props.id,e,this.props.language,!1,t)}},{key:"handleLanguageChange",value:function(e){this.props.globalActions.stemUpdateLanguage(this.props.id,e.target.value)}},{key:"maybeEval",value:function(e){var t=this;e.shiftKey&&"Enter"===e.key&&(e.preventDefault(),this.props.globalActions.stemUpdate(this.props.id,{code:this.state.code}),this.textAreaRef.current.classList.add("flash"),setTimeout((function(){t.textAreaRef.current.classList.remove("flash")}),250))}},{key:"delete",value:function(){this.props.globalActions.trackDeleteStem(this.props.trackId,this.props.id)}},{key:"updateEffect",value:function(e){var t=this.props.effects.map((function(t){return t.id===e.id?Object.assign(t,e,{}):t}));this.props.globalActions.stemUpdate(this.props.id,{effects:t})}},{key:"updateName",value:function(e){this.props.globalActions.stemUpdate(this.props.id,{name:e.target.value})}},{key:"_updateCode",value:function(e){this.props.globalActions.stemUpdate(this.props.id,{code:e.target.value})}}]),t}(c.Component)},,,,,,,,,,,,,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),_home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_renderers__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(62),hydra_synth__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(100),hydra_synth__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(hydra_synth__WEBPACK_IMPORTED_MODULE_7__),_index_css__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(174),_index_css__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_index_css__WEBPACK_IMPORTED_MODULE_8__),_renderers_TidalCycles_dom__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(102),_renderers_Hydra_dom__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(103),Render=function(_Component){function Render(e){var t;return Object(_home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Render),(t=Object(_home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(Render).call(this,e))).hydraRef=react__WEBPACK_IMPORTED_MODULE_5___default.a.createRef(),t.hydraCode=_renderers__WEBPACK_IMPORTED_MODULE_6__.a.Hydra.getCode(t.props),t.hydraMacros=_renderers__WEBPACK_IMPORTED_MODULE_6__.a.Hydra.getMacros(t.props),t}return Object(_home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(Render,_Component),Object(_home_jamie_repos_DeadCode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Render,[{key:"componentDidMount",value:function(){this.props.globalActions.connect(window.location.hostname,this.props.connection.port);try{window.hydra=new hydra_synth__WEBPACK_IMPORTED_MODULE_7___default.a({canvas:this.hydraRef.current})}catch(e){console.warn("Unable to start hydra")}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState,snapshot){var hydraCode=_renderers__WEBPACK_IMPORTED_MODULE_6__.a.Hydra.getCode(this.props),hydraMacros=_renderers__WEBPACK_IMPORTED_MODULE_6__.a.Hydra.getMacros(this.props);if(hydraMacros!==this.hydraMacros){try{eval(hydraMacros)}catch(e){console.warn("Index Error",e)}this.hydraMacros=hydraMacros}if(hydraCode!==this.hydraCode){try{eval(hydraCode)}catch(e){console.warn("Index Error",e)}this.hydraCode=hydraCode}}},{key:"render",value:function(){return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{style:{backgroundColor:"black",width:"100%",height:"100%"}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"Render"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_renderers_TidalCycles_dom__WEBPACK_IMPORTED_MODULE_9__.a,this.props),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_renderers_Hydra_dom__WEBPACK_IMPORTED_MODULE_10__.a,this.props)),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("canvas",{id:"HydraCanvas",ref:this.hydraRef}))}}]),Render}(react__WEBPACK_IMPORTED_MODULE_5__.Component);__webpack_exports__.a=Render},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(4),r=a(5),o=a(7),s=a(6),i=a(49),c=a(8),l=a(0),u=a.n(l),p=a(71),d=(a(75),a(52)),f=a(57),h=(a(53),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).ref=u.a.createRef(),a.state={fontSize:36,isCorrectSize:!0},a.justMinimized=!1,a.triggerResize=Object(d.throttle)(a.triggerResize.bind(Object(i.a)(a)),2,{leading:!1,trailing:!0}),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"triggerResize",value:function(){if((this.ref.current.scrollHeight-this.ref.current.clientHeight)/this.ref.current.clientHeight>0)this.justMinimized=!0,this.setState({fontSize:this.state.fontSize-1}),this.triggerResize();else{var e=0;this.ref.current.childNodes.forEach((function(t){e+=t.clientHeight})),console.log(e/this.ref.current.clientHeight),e/this.ref.current.clientHeight<.95&&0!==e&&!this.justMinimized&&(this.justMinimized=!1,this.setState({fontSize:this.state.fontSize+1}),this.triggerResize()),this.justMinimized=!1}}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.tracks).map((function(t){return function(e,t,a,n){var r=[];if(t.stems.forEach((function(t){var a=e.stems[t];a.on&&""!==a.code&&"TidalCycles"===a.language&&r.push(u.a.createElement(m,{key:"stem_".concat(t),state:e,stem:a,id:t,triggerResize:n}))})),r.length<1)return null;var o=[];t.effects.forEach((function(t){var a=e.effects[t];a.on&&o.push(_(e,a,t,n))})),t.stems.filter((function(t){return e.stems[t].on})).length;return u.a.createElement("div",{key:"track_".concat(a),id:"track_".concat(a),className:"track"},o,"$",r)}(e.props,e.props.tracks[t],t,e.triggerResize.bind(e))}));return u.a.createElement("div",{style:{fontSize:this.state.fontSize},ref:this.ref,className:"code"},t)}}]),t}(l.Component));var m=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).ref=u.a.createRef(),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.state,n=t.stem,r=t.id;if(""===n.code)return null;var o=[];return n.effects.forEach((function(t){var n=a.effects[t];n.on&&o.push(_(a,n,t,e.props.triggerResize))})),u.a.createElement("span",{ref:this.ref,id:"stem_".concat(r),key:"stem_".concat(r),className:"stem justAdded"},o,"$",u.a.createElement(f.a,{text:this.props.stem.code,rate:20,triggerResize:this.props.triggerResize}))}}]),t}(l.Component);function _(e,t,a,n){var r=p.a[t.type](t)+" ";return u.a.createElement(f.a,{className:"effect",rate:20,triggerResize:n,text:"(|* gain 1) "===r?"":r})}},function(e,t,a){"use strict";var n=a(4),r=a(5),o=a(7),s=a(6),i=a(49),c=a(8),l=a(0),u=a.n(l),p=(a(175),a(61)),d=a(52),f=a(57),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).ref=u.a.createRef(),a.state={fontSize:36,isCorrectSize:!0},a.justMinimized=!1,a.triggerResize=Object(d.throttle)(a.triggerResize.bind(Object(i.a)(a)),2,{leading:!1,trailing:!0}),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"triggerResize",value:function(){if((this.ref.current.scrollHeight-this.ref.current.clientHeight)/this.ref.current.clientHeight>0)this.justMinimized=!0,this.setState({fontSize:this.state.fontSize-1}),this.triggerResize();else{var e=0;this.ref.current.childNodes.forEach((function(t){e+=t.clientHeight})),console.log(e/this.ref.current.clientHeight),e/this.ref.current.clientHeight<.95&&0!==e&&!this.justMinimized&&(this.justMinimized=!1,this.setState({fontSize:this.state.fontSize+1}),this.triggerResize()),this.justMinimized=!1}}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.tracks).map((function(t){return u.a.createElement(m,{key:"track_".concat(t),state:e.props,track:e.props.tracks[t],id:t,triggerResize:e.triggerResize.bind(e)})}));return u.a.createElement("div",{style:{fontSize:this.state.fontSize},ref:this.ref,className:"code"},t)}}]),t}(l.Component);t.a=h;var m=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.track.stems.map((function(t){var a=e.props.state.stems[t];return a.on&&"Hydra"===a.language&&""!==a.code.trim()?u.a.createElement(_,{state:e.props.state,triggerResize:e.props.triggerResize,stem:a,id:t,key:"stem_".concat(t)}):null})).filter((function(e){return e}));if(t.length<1)return null;this.props.track.effects.map((function(t){var a=e.props.state.effects[t];if(a.on&&""!==Object(p.b)(a).trim())return u.a.createElement(g,{state:e.props.state,triggerResize:e.props.triggerResize,effect:a,id:t,key:"effect_".concat(t)})}));return u.a.createElement("div",{className:"track",id:"track_".concat(this.props.id),key:"track_".concat(this.props.id)},t)}}]),t}(l.Component),_=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement(f.a,{text:this.props.stem.code,rate:20,triggerResize:this.props.triggerResize})}}]),t}(l.Component),g=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement(f.a,{text:Object(p.b)(this.props.effect),rate:20,triggerResize:this.props.triggerResize})}}]),t}(l.Component)},,,,,,,function(e,t,a){e.exports=a(177)},,,,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(14),r=a(17),o=a(4),s=a(5),i=a(7),c=a(6),l=a(8),u=a(0),p=a.n(u),d=a(9),f=(a(119),a(120),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).holdTime=new Date,a.dragToggle=!1,a.ref=p.a.createRef(),a.timeout=null,a.touchMoveCount=0,a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"flash",value:function(){var e=this;this.ref.current.classList.add("flash"),setTimeout((function(){e.ref.current.classList.remove("flash")}),500)}},{key:"onMouseDown",value:function(){var e=this;this.timeout=setTimeout((function(){e.openInFlyout()}),500),this.holdTime=new Date,this.dragToggle=!1}},{key:"onMouseUp",value:function(e){e.preventDefault(),this.touchMoveCount=0;var t=new Date;this.dragToggle||t-this.holdTime<500&&(clearTimeout(this.timeout),e.shiftKey?this.props.globalActions.stemUpdate(this.props.id,{selected:!this.props.selected}):e.button?e.preventDefault():this.toggle()),this.holdTime=t,this.dragToggle=!1}},{key:"onTouchMove",value:function(e){this.touchMoveCount++,e.preventDefault(),this.touchMoveCount>5&&(clearTimeout(this.timeout),this.dragToggle=!0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{ref:this.ref,className:"Stem noselect "+(this.props.highlight?"highlight":""),tabIndex:0,onKeyUp:this.onKeyUp.bind(this),onTouchStart:this.onMouseDown.bind(this),onTouchEnd:this.onMouseUp.bind(this),onTouchMove:this.onTouchMove.bind(this),onMouseDown:this.onMouseDown.bind(this),onMouseUp:this.onMouseUp.bind(this),onContextMenu:function(t){t.preventDefault(),e.openInFlyout()}},p.a.createElement("div",{className:"stemButton"+(this.props.selected?" selected":"")+(this.props.on?" on ":" off ")},p.a.createElement("div",{className:"verticalCenter",style:{width:"100%"}},this.props.name)))}},{key:"onKeyUp",value:function(e){e.ctrlKey&&"v"===e.key&&this.props.globalActions.stemPaste(this.props.id)}},{key:"onTouchStart",value:function(){this.toggle()}},{key:"mouseUp",value:function(e){e.shiftKey?this.props.globalActions.stemUpdate(this.props.id,{selected:!this.props.selected}):e.button?e.preventDefault():this.toggle()}},{key:"openInFlyout",value:function(){this.props.globalActions.stemUpdate(this.props.id,{open:!0})}},{key:"toggle",value:function(){this.props.globalActions.stemUpdate(this.props.id,{on:!this.props.on})}}]),t}(u.Component)),h=a(20),m=Object(r.b)((function(e,t){return Object(d.a)({},e.stems[t.id],{},t)}),(function(e){return{globalActions:Object(h.a)(e)}}))(f),_=(a(122),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return p.a.createElement("div",Object.assign({},this.props,{className:"plusButton"}),p.a.createElement("div",null,"+"))}}]),t}(u.Component)),g=a(51),v=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"stemToComponent",value:function(e,t){var a=t<this.props.midi.top+this.props.midi.rows&&t>=this.props.midi.top&&this.props.index<this.props.midi.left+this.props.midi.columns&&this.props.index>=this.props.midi.left;return p.a.createElement(m,{key:e,id:e,highlight:a})}},{key:"render",value:function(){var e=this.props.stems.map(this.stemToComponent.bind(this));return p.a.createElement("div",{className:"Track"},p.a.createElement("input",{onChange:this.titleChange.bind(this),value:this.props.name}),p.a.createElement("div",{style:{position:"relative",height:"100%"}},p.a.createElement("div",{className:"stems"},e,p.a.createElement("div",{style:{padding:"5px"}},p.a.createElement(_,{onClick:this.addStem.bind(this)}))),p.a.createElement("div",{className:"effects"},p.a.createElement("div",{className:"launchButton"},p.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"var(--font-color-dark)",width:"24",height:"24",viewBox:"0 0 24 24"},p.a.createElement("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),p.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))),p.a.createElement(g.a,{isVertical:!0,noToggle:!0,updateEffect:this.updateEffect.bind(this),id:this.props.effects[0]}))))}},{key:"updateEffect",value:function(e){this.props.globalActions.trackUpdate(this.props.id,{effects:[e]})}},{key:"addStem",value:function(){this.props.globalActions.trackAddStem(this.props.id)}},{key:"titleChange",value:function(e){this.props.globalActions.trackUpdate(this.props.id,{name:e.target.value})}}]),t}(u.Component),b=Object(r.b)((function(e,t){var a=Object.keys(e.tracks).findIndex((function(e){return e===t.id})),n=e.tracks[t.id];return Object(d.a)({},n,{},t,{midi:e.midi,index:a})}),(function(e){return{globalActions:Object(h.a)(e)}}))(v),E=(a(137),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"trackToDom",value:function(e){return e.globalActions=this.props.globalActions,p.a.createElement(b,Object.assign({key:e.id},e))}},{key:"trackIdToComponent",value:function(e){return p.a.createElement(b,{key:e,id:e})}},{key:"render",value:function(){var e=Object.keys(this.props.tracks).map(this.trackIdToComponent.bind(this));return p.a.createElement("div",{className:"LaunchSpace",style:this.props.style,tabIndex:"1",onKeyUp:this.onKeyUp.bind(this)},e,p.a.createElement(_,{onClick:this.newTrack.bind(this),style:{display:"inline-block",top:"0px",width:"50px",minWidth:"50px",height:"30px",margin:"5px"}}))}},{key:"onKeyUp",value:function(e){var t=this;if("delete"===e.key.toLowerCase())Object.keys(this.props.tracks).map((function(e){return t.props.tracks[e].stems.map((function(a){return{trackId:e,stemId:a,selected:t.props.stems[a].selected}}))})).flat().filter((function(e){return e.selected})).forEach((function(e){t.props.globalActions.trackDeleteStem(e.trackId,e.stemId)}));else if(e.ctrlKey&&"c"===e.key.toLowerCase())this.props.globalActions.stemCopy();else if("escape"===e.key.toLowerCase()){Object.keys(this.props.stems).filter((function(e){return t.props.stems[e].selected})).forEach((function(e){return t.props.globalActions.stemUpdate(e,{selected:!1})}))}}},{key:"newTrack",value:function(){this.props.globalActions.trackAdd()}}]),t}(u.Component)),y=Object(r.b)((function(e,t){return e}),(function(e){return{globalActions:Object(h.a)(e)}}))(E),O=(a(138),a(139),a(53)),C=a(73),k=a(26),T=a(70),j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"changeTempo",value:function(e,t){var a=this.props;a.properties.tempo=t.properties.value,this.props.globalActions.masterUpdate(k.a.Languages.TidalCycles,a)}},{key:"getLanguageSpecific",value:function(){var e=this;switch(this.props.language){case k.a.Languages.TidalCycles:var t={language:"TidalCycles",on:!0,properties:{code:"Tempo",max:300,min:0,operator:"",scale:"linear",step:.01,value:this.props.properties.tempo},globalActions:{effectUpdate:this.changeTempo.bind(this)},noToggle:!0,key:"tempo",type:"SLIDER",updateEffect:this.changeTempo.bind(this)};return[p.a.createElement(O.a,{key:"tidalEditorMain",onChange:function(t){e.props.globalActions.masterUpdate(e.props.language,{macros:t})},onChangeLive:function(t){e.setState({bootScriptLive:t})},code:this.props.macros,live:!1}),p.a.createElement(C.a,t)];case k.a.Languages.Hydra:return[p.a.createElement(O.a,{key:"HydraEditorMain",onChange:function(t){e.props.globalActions.masterUpdate(e.props.language,{macros:t})},onChangeLive:function(t){e.setState({bootScriptLive:t})},code:this.props.macros,live:!1})];default:return console.warn("unrecognized language: "+this.props.language),null}}},{key:"newEffect",value:function(e,t){this.props.globalActions.masterAddEffect(e,this.props.language,!1,t)}},{key:"updateEffect",value:function(e){this.props.globalActions.updateMasterEffect(e)}},{key:"effectIdToComponent",value:function(e){return p.a.createElement(g.a,{key:e,id:e,updateEffect:this.updateEffect.bind(this)})}},{key:"render",value:function(){var e=this.props.effects.map(this.effectIdToComponent.bind(this)),t=this.getLanguageSpecific();return p.a.createElement("div",{className:"LanguageControls"},t,e,p.a.createElement(T.a,{onCreate:this.newEffect.bind(this)}))}}]),t}(u.Component),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={language:Object.keys(a.props.master)[0]},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"languageChange",value:function(e){this.setState(Object.assign({},this.state,{language:e.target.value}))}},{key:"render",value:function(){var e=Object.keys(this.props.master).map((function(e){return p.a.createElement("option",{key:e,value:e},e)}));return p.a.createElement("div",{className:"MasterEditor",style:this.props.style},p.a.createElement("select",{onChange:this.languageChange.bind(this),value:this.state.language},e),p.a.createElement(j,Object.assign({},this.props.master[this.state.language],{language:this.state.language,globalActions:this.props.globalActions})))}},{key:"toggle",value:function(e){this.props.globalActions.toggleLive(e.target.checked)}}]),t}(u.Component),D=a(75),A=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{onClick:this.props.switchToTab,className:"Tab"+(this.props.selected?"":" unselected")},p.a.createElement("label",null,this.props.label),this.props.closeAble?p.a.createElement("svg",{onClick:this.props.closeTab,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},p.a.createElement("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})):null,this.props.selected?p.a.createElement("div",{className:"indicator"}):null)}}]),t}(u.Component),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={tab:"master",history:[]},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"switchTab",value:function(e){var t=this.props.stems.map((function(e){return e.id}));if("master"===e||t.includes(e)){var a=this.state.history.concat([e]);this.setState({tab:e,history:a})}else console.log("err tab not found")}},{key:"closeTab",value:function(e){var t,a,n=this;this.state.history.length-1?(a=(a=this.state.history.slice(0,-1)).filter((function(t){return t!==e})),t=a[a.length-1]||"master"):(t="master",a=this.state.history),this.setState({tab:t,history:a}),setTimeout((function(){n.props.globalActions.stemUpdate(e,{open:!1}),n.setState({tab:t,history:a})}),1)}},{key:"render",value:function(){var e=this,t=this.props.stems.map((function(t){return{tab:p.a.createElement(A,{switchToTab:function(){e.switchTab.bind(e)(t.id)},label:""===t.name?"<untitled>":t.name,key:t.id+"_tab",id:t.id,selected:e.state.tab===t.id,closeAble:!0,closeTab:function(){e.closeTab.bind(e)(t.id)}}),content:p.a.createElement(D.a,Object.assign({style:{display:e.state.tab===t.id?"block":"none"},key:t.id+"_editor"},t,{globalActions:e.props.globalActions}))}}));return p.a.createElement("div",{className:"Flyout",style:this.props.style},p.a.createElement("div",{className:"scrollbarHidden"},p.a.createElement("div",{className:"TabContainer"},p.a.createElement(A,{switchToTab:function(){e.switchTab.bind(e)("master")},value:"master",label:"master",selected:"master"===this.state.tab}),t.map((function(e){return e.tab})))),p.a.createElement("div",{className:"content"},p.a.createElement(S,Object.assign({},this.props,{value:"master",style:{display:"master"===this.state.tab?"block":"none"}})),t.map((function(e){return e.content}))))}}]),t}(u.Component),w=Object(r.b)((function(e){var t=Object.keys(e.stems).map((function(t){return Object.assign({},e.stems[t],{id:t})})).filter((function(e){return e.open}));return{master:e.master,connection:e.connection,stems:t}}),(function(e){return{globalActions:Object(h.a)(e)}}))(M),I=(a(143),a(144),a(91)),R=a.n(I),x=a(92),L=a.n(x),U=a(94),P=a.n(U),N=a(93),K=a.n(N),F=a(96),z=a.n(F),H=a(95),W=a.n(H),B=(a(145),a(90)),V=a.n(B),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).ref=p.a.createRef(),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.ref.current&&this.ref.current.focus()}},{key:"render",value:function(){return p.a.createElement("div",{ref:this.ref,className:"Modal",onKeyUp:this.onKeyPress.bind(this),tabIndex:2},p.a.createElement("div",{className:"modalBody"},p.a.createElement("div",{className:"modalClose"},p.a.createElement(V.a,{onClick:this.props.onClose})),p.a.createElement("div",{className:"modalContent"},this.props.children)))}},{key:"onKeyPress",value:function(e){"escape"===e.key.toLowerCase()&&this.props.onClose()}}]),t}(u.Component),G=a(97),J=a.n(G),$=a(213),Y=a(33),Q=a.n(Y),X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={connection:Object(d.a)({},a.props)},a.connect=Q()((function(){a.props.globalActions.connect(a.state.connection.url,a.state.connection.port)}),2e3),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"ConnectionSettings"},p.a.createElement("div",null,p.a.createElement($.a,{style:{width:"50%",marginLeft:"5px"},label:"URL",value:this.state.connection.url,onChange:function(t){var a=e.state.connection;a.url=t.target.value,e.setState({connection:a}),e.connect()},margin:"normal"}),p.a.createElement($.a,{style:{width:"50%",marginLeft:"5px",maxWidth:"100px"},label:"Port",type:"number",value:this.state.connection.port,onChange:function(t){var a=e.state.connection;a.port=parseInt(t.target.value),e.setState({connection:a}),e.connect()},margin:"normal"}),p.a.createElement("button",{style:{width:"100%"},onClick:this.connect},"reconnect"),p.a.createElement("button",{style:{width:"100%"},onClick:this.props.globalActions.pushState},"push state to other clients")))}}]),t}(u.Component),Z=Object(r.b)((function(e,t){return Object(d.a)({},e.connection,{},t)}),(function(e){return{globalActions:Object(h.a)(e)}}))(X),ee=a(31),te=(a(147),a(148),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={value:a.props.value},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){return p.a.createElement("div",{className:"TextColorPicker"},p.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onChange.bind(this)}),p.a.createElement("div",{style:{backgroundColor:this.state.value}},"\xa0"))}}]),t}(u.Component)),ae={"--bg-image":function(e){return p.a.createElement("input",{onChange:e.onChange,value:e.value,type:"text"})},"--border-radius":function(e){return p.a.createElement("input",{onChange:e.onChange,value:e.value,type:"text"})},"--stem-on":function(e){return p.a.createElement("input",{onChange:e.onChange,value:e.value,type:"text"})},"--stem-off":function(e){return p.a.createElement("input",{onChange:e.onChange,value:e.value,type:"text"})},"--font-family":function(e){return p.a.createElement("input",{onChange:e.onChange,value:e.value,type:"text"})},"--scrollbar-width":function(e){return p.a.createElement("input",{onChange:e.onChange,value:e.value,type:"text"})},"--launchspace-bg-color":function(e){return p.a.createElement(te,{onChange:e.onChange,value:e.value})},"--stem-editor-color":function(e){return p.a.createElement(te,{onChange:e.onChange,value:e.value})},"--font-color-dark":function(e){return p.a.createElement(te,{onChange:e.onChange,value:e.value})},"--font-color-light":function(e){return p.a.createElement(te,{onChange:e.onChange,value:e.value})},"--track-border-color":function(e){return p.a.createElement(te,{onChange:e.onChange,value:e.value})},"--select-color":function(e){return p.a.createElement(te,{onChange:e.onChange,value:e.value})},"--settings-background-color":function(e){return p.a.createElement(te,{onChange:e.onChange,value:e.value})},"--settings-font-color":function(e){return p.a.createElement(te,{onChange:e.onChange,value:e.value})},"--midi-background-color":function(e){return p.a.createElement(te,{onChange:e.onChange,value:e.value})}},ne=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={connection:Object(d.a)({},a.props),styleForm:{}},a.connect=Q()((function(){a.props.globalActions.connect(a.state.connection.url,a.state.connection.port)}),2e3),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"updateStyleForm",value:function(e){this.setState({styleForm:Object.assign({},this.state.styleForm,Object(ee.a)({},e.target.name,e.target.value))})}},{key:"updateStyle",value:function(){this.props.globalActions.settingsUpdateStyle(this.state.styleForm)}},{key:"render",value:function(){var e=this,t=Object.keys(ae).map((function(t){var a=ae[t];return p.a.createElement("div",{key:t},p.a.createElement("div",null,t),p.a.createElement(a,{onChange:e.updateStyleForm.bind(e),value:e.props.style[t]}))}));return p.a.createElement("div",{id:"Settings"},p.a.createElement("div",{className:"Setting"},p.a.createElement("div",{className:"style"},p.a.createElement("h1",null,"Style"),t,p.a.createElement("button",{onClick:this.updateStyle.bind(this)},"Apply"))))}}]),t}(u.Component),re=Object(r.b)((function(e,t){return Object(d.a)({},e.settings,{},t)}),(function(e){return{globalActions:Object(h.a)(e)}}))(ne),oe={settings:p.a.createElement(re,null),connections:p.a.createElement(Z,null),help:p.a.createElement("a",{href:"https://github.com/JamieBeverley/DeadCode/blob/master/README.md",target:"_blank"},"See docs here")},se=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={modal:null},a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.getModal(this.state.modal);return p.a.createElement("div",{className:"Header"},p.a.createElement(R.a,{onClick:this.openSettings.bind(this)}),p.a.createElement(L.a,{onClick:this.props.globalActions.save}),p.a.createElement(K.a,{onClick:this.props.globalActions.load}),p.a.createElement(P.a,{onClick:this.props.globalActions.download}),p.a.createElement(W.a,{onClick:function(){e.props.globalActions.open()}}),p.a.createElement(z.a,{onClick:this.openConnections.bind(this),style:{fill:this.props.connection.isConnected?"green":"red"}}),p.a.createElement(J.a,{onClick:this.openHelp.bind(this)}),t)}},{key:"closeModal",value:function(){this.setState({modal:!1})}},{key:"getModal",value:function(e){var t=oe[e];return t?p.a.createElement(q,{onClose:this.closeModal.bind(this)},t):null}},{key:"openSettings",value:function(){this.setState({modal:"settings"})}},{key:"openConnections",value:function(){this.setState({modal:"connections"})}},{key:"openHelp",value:function(){this.setState({modal:"help"})}}]),t}(u.Component),ie=Object(r.b)((function(e,t){return Object(d.a)({connection:e.connection},t)}),(function(e){return{globalActions:Object(h.a)(e)}}))(se),ce=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={divider:70,horizontalDivider:75},a.appRef=p.a.createRef(),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.globalActions.connect(window.location.hostname,this.props.connection.port)}},{key:"render",value:function(){return p.a.createElement("div",{onDragOver:function(e){e.preventDefault()},ref:this.appRef,className:"App",tabIndex:"0",onKeyDown:this.macros.bind(this)},p.a.createElement(ie,null),p.a.createElement("div",{style:{height:"100%"}},p.a.createElement(y,{style:{width:this.state.divider+"%"}}),p.a.createElement("div",{id:"rightPanel",style:{width:100-this.state.divider+"%"}},p.a.createElement(w,{style:{height:this.state.horizontalDivider+"%"}}),p.a.createElement("iframe",{style:{height:100-this.state.horizontalDivider+"%",border:"1pt solid var(--stem-on)",borderBottom:"none",borderRight:"none"},src:"/render"}))))}},{key:"dividerResize",value:function(e){this.setState({divider:100*e/document.body.clientWidth})}},{key:"dividerResizeRightPanel",value:function(e){this.setState({horizontalDivider:100*e/document.body.clientHeight})}},{key:"macros",value:function(e){e.ctrlKey&&("s"===e.key?(e.preventDefault(),this.props.globalActions.save()):"l"===e.key.toLowerCase()?(e.preventDefault(),e.shiftKey?this.props.globalActions.loadFromServer():this.props.globalActions.load()):"d"===e.key?(e.preventDefault(),this.props.globalActions.download()):"o"===e.key?(e.preventDefault(),this.props.globalActions.open()):"p"===e.key&&(e.preventDefault(),this.props.globalActions.pushState()))}}]),t}(u.Component),le=Object(r.b)((function(e){return e}),(function(e){return{globalActions:Object(h.a)(e)}}))(ce),ue=a(98),pe=a.n(ue),de=a(104),fe=a(40),he=a(99),me=Object(r.b)((function(e){return e}),(function(e){return{globalActions:Object(h.a)(e)}}))(he.a),_e=a(25),ge=a(66);Object(ge.addMiddleware)(pe.a),Object(n.render)(p.a.createElement(de.a,{basename:"/DeadCode"},p.a.createElement(r.a,{store:_e.a},p.a.createElement(fe.a,{path:"/",exact:!0,component:le}),p.a.createElement(fe.a,{path:"/render",exact:!0,component:me}))),document.getElementById("root"))}],[[110,1,2]]]);
//# sourceMappingURL=main.5429e52a.chunk.js.map